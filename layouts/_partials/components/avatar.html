{{/*
Render the avatar.

@usage: To display the avatar,
you should set the section '[avatar]' in
the custom params of the site configuration file,
(See "https://gohugo.io/methods/site/params/".)
with these keys:
  isRemote (bool)
  url (string)
  height (number)
  width (number)
--- end of @usage.

@context (page) . The current page.

@example {{ partial "components/avatar.html" . }}
*/}}

{{ if site.Params.avatar }}
  {{ $config := site.Params.avatar }}
  {{ $isRemote := $config.isRemote }}
  {{ $url := $config.url }}
  {{ $height := $config.height }}
  {{ $width := $config.width }}

  <div class="avatar-wrapper">
  {{ if $isRemote }}
    {{ with try (resources.GetRemote $url) }}
      {{ with .Err }}
        {{ errorf "%s" . }}
      {{ else with .Value }}
        <img src="{{ .RelPermalink }}" height="{{ $height }}" width="{{ $width }}" alt="avatar">
      {{ else }}
        {{ errorf "Unable to get remote resource %q" $url }}
      {{ end }}
    {{ end }}
  {{ else }}
    {{ $avatar := resources.Get $url }}
    {{ if $avatar }}
      {{ with $avatar }}
        <img src="{{ .RelPermalink }}" height="{{ $height }}" width="{{ $width }}" alt="avatar">
      {{ end }}
    {{ else }}
      {{ errorf "%q not found" $url }}
    {{ end }}
  {{ end }}
  </div>
{{ end }}
